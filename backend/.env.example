# ============================================================================
# SMS Authentication Backend - Environment Variables Template
# ============================================================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control!

# ============================================================================
# Database Configuration (Supabase PostgreSQL)
# ============================================================================
DATABASE_URL=postgresql://postgres:your-password@db.your-project.supabase.co:5432/postgres
DATABASE_MAX_CONNECTIONS=10
DATABASE_MAX_IDLE_CONNECTIONS=5
DATABASE_CONN_MAX_LIFETIME=300

# ============================================================================
# JWT Configuration
# ============================================================================
# Generate using: openssl rand -hex 32
JWT_SECRET=your-256-bit-secret-key-here
JWT_REFRESH_SECRET=your-different-256-bit-secret-key-here
JWT_ACCESS_TOKEN_EXPIRY=3600        # 1 hour in seconds
JWT_REFRESH_TOKEN_EXPIRY=604800     # 7 days in seconds

# ============================================================================
# Dialog SMS Gateway Configuration
# ============================================================================
# SMS Mode: "dev" returns OTP in response (no SMS sent), "production" sends actual SMS
SMS_MODE=dev

# Dialog eSMS API Configuration (Required only in production mode)
DIALOG_SMS_API_URL=https://e-sms.dialog.lk/api/v2
DIALOG_SMS_USERNAME=kanchanadesilva
DIALOG_SMS_PASSWORD=Dialog@123
DIALOG_SMS_MASK=KanchTest

# Legacy fields (deprecated, kept for backward compatibility)
DIALOG_SMS_API_KEY=
DIALOG_SMS_SENDER_ID=SmartTransit

# ============================================================================
# Application Configuration
# ============================================================================
PORT=8080
GIN_MODE=release                    # debug, release, test
LOG_LEVEL=info                      # debug, info, warn, error
ENVIRONMENT=development             # development, staging, production

# ============================================================================
# OTP Configuration
# ============================================================================
OTP_LENGTH=6
OTP_EXPIRY_MINUTES=5
OTP_MAX_ATTEMPTS=3
OTP_RATE_LIMIT=3                    # Max OTP requests per window
OTP_RATE_WINDOW_MINUTES=10

# ============================================================================
# SMS Auto-Read Configuration (Android)
# ============================================================================
# App signature hash for SMS auto-read feature
# Get this by running the Flutter app and checking logs for "APP SIGNATURE HASH"
# Format: 11-character hash (e.g., FA+9qCX9VSu)
# Driver/Conductor App Hash
DRIVER_APP_HASH=Yhr+pPC1+tw
# Passenger App Hash (if different)
PASSENGER_APP_HASH=P4m/VJkG0UX

# ============================================================================
# Rate Limiting Configuration
# ============================================================================
RATE_LIMIT_REQUESTS=100             # Max requests per window
RATE_LIMIT_WINDOW_SECONDS=60        # Window duration

# ============================================================================
# CORS Configuration
# ============================================================================
CORS_ALLOWED_ORIGINS=http://localhost:3000,https://yourapp.com
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization

# ============================================================================
# Security
# ============================================================================
BCRYPT_COST=12
ENABLE_REQUEST_LOGGING=true
ENABLE_AUDIT_LOGGING=true

# ============================================================================
# Monitoring (Optional)
# ============================================================================
SENTRY_DSN=
NEW_RELIC_LICENSE_KEY=
